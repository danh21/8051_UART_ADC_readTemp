C51 COMPILER V9.01   MAIN                                                                  08/30/2023 21:30:20 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\phan_mem\KEIL\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #include "ADC0808.h"
   3          #include "7Seg4Dig_Anode.h"
   4          
   5          
   6          
   7          sbit led = P3^7;
   8          
   9          uchar rxData;
  10          
  11          
  12          
  13          void setup_UART()
  14          {
  15   1              TMOD = 0x20;    // enable timer1, auto reload
  16   1              TH1 = -3;               // 9600 Baud rate
  17   1              SCON = 0x50;    // 8 bit uart, 1 stopbit, REN enabled
  18   1              TR1 = 1;                // start timer1
  19   1              IE = 0x90;              // enable global, serial port interrupt                                                                                         
  20   1      }
  21          
  22          
  23          
  24          void serial_int(void) interrupt 4               // turn on/off led
  25          {       
  26   1              if (RI)
  27   1              {               
  28   2                      rxData = SBUF;  
  29   2                      RI = 0;         
  30   2                      switch(rxData)
  31   2                      {
  32   3                              case('0'):      {led=0; break;}
  33   3                              case('1'):      {led=1; break;} 
  34   3                      }                       
  35   2              }       
  36   1      }
  37          
  38          
  39          
  40          void transmitData(uchar Data)
  41          {
  42   1              SBUF = Data;
  43   1              while (TI == 0);
  44   1              TI = 0;
  45   1      }
  46          
  47          
  48          
  49          void main()
  50          {
  51   1              uchar hundreds, dozens, units, channel, i;
  52   1      
  53   1              setup_UART();
  54   1      
  55   1              for (channel = 0; channel < 8; channel++)
C51 COMPILER V9.01   MAIN                                                                  08/30/2023 21:30:20 PAGE 2   

  56   1              { 
  57   2                      for (i = 0; i < 30; i++)
  58   2                      {
  59   3                              Led7Seg_scan = led7seg_dig1;
  60   3                              Led7Seg_data = dig[channel+1];
  61   3                              on_DP;
  62   3                              delayScan(500);
  63   3      
  64   3                              ADC0808_read(channel);
  65   3      
  66   3                              hundreds = ADC0808_DATA / 100;
  67   3                              dozens = (ADC0808_DATA / 10) % 10;
  68   3                              units = ADC0808_DATA % 10;
  69   3                                         
  70   3                              Led7Seg_scan = led7seg_dig2;
  71   3                              Led7Seg_data = dig[hundreds];
  72   3                              delayScan(500);
  73   3      
  74   3                              Led7Seg_scan = led7seg_dig3;
  75   3                              Led7Seg_data = dig[dozens];
  76   3                              delayScan(500);
  77   3      
  78   3                              Led7Seg_scan = led7seg_dig4;
  79   3                              Led7Seg_data = dig[units];
  80   3                              delayScan(500);                         
  81   3                      }
  82   2      
  83   2                      transmitData(ADC0808_DATA);
  84   2              }
  85   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    223    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     17       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
